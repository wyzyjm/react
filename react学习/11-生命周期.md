# React 生命周期

-   除了卸载,其它带 will 的钩子 都需加 UNSAFE\_ 前缀
-   17 版本 依旧能用, 但会提示, 改名了
-   18 版本 不能用了, 必须加 UNSAFE\_ 前缀
-   将做异步渲染, 这几个会有问题

<!-- 旧版 -->

```js
/**
    初次渲染: 构造器constructor -> 挂载前componentWillMount ->  渲染render -> 挂载完毕componentDidMount
    更新:
        父子组件关系
        line1: 将要接收props(componentWillReceiveProps(props) 第一次接收不算) -> 是否允许更新shouldComponentUpdate(默认return true) -> 将要更新componentWillUpdate -> render -> 更新完毕componentDidUpdate
        line2: 修改数据setState -> 是否允许更新shouldComponentUpdate(默认return true) -> 将要更新componentWillUpdate -> render -> 更新完毕componentDidUpdate
        line3: 强制更新forceUpdate() 不更新state时,更新dom ->  将要更新componentWillUpdate -> render -> 更新完毕componentDidUpdate
    卸载: 销毁componentWillUnmount
*/
```

<!-- 新版 -->

```js

    UNSAFE_componentWillMount(){
        // 组件将要 挂载
    }
    UNSAFE_componentWillReceiveProps(){
        // 组件第二次接收到 props
    }
    UNSAFE_componentWillUpdate(){
        // 组件将要更新
    }

    // 组件挂载到页面了
    componentDidMount(){
        // 开启定时器
        // 发送ajax
        // 订阅消息
    }

    // 组件将要销毁,还没销毁呢
    componentWillUnmount(){
        // 销毁定时器
        // 取消订阅
    }

    // 初始化渲染 +  更新
    render(){return <div></div>}
```

1. 组件销毁

## 组件挂载 与 销毁

```js
ReactDOM.rendere(<App />, document.getElementById("root")) // 组价挂载
ReactDOM.unmountComponentAtNode(doucment.getElementById("root")) // 组件卸载
```
